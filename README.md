## Monacaのブロック崩しゲームにランキング機能をつける（JavaScript）

## このチュートリアルで作るもの
- スコアをクラウドに保存する機能
- スコア保存時に名前を入力する（ログイン）機能
- ランキングを表示する機能

## 注意点
- ｍBaaSのSDKはv2を使用
- mBaaSの初期化用キーは main.js@486,487 にて定義

## ブロック崩しサンプルについて
- 基本的なゲーム中の動作はすべて変数BBに記述、pixi.js（ライブラリ）上で動く
- アプリが立ち上がるとinit関数が呼び出される
- ゲームはすべてpixi.js上でで動くため、HTML側の記述は特になし

## 動作の流れ
- ゲームオーバー or クリア
    * ログイン処理（connectToNCMB）呼び出し
- connectToNCMBにて状態に応じて分岐
    * 未登録（localStorageにUUIDの保存がない）
        → ユーザー登録（createUser）
    * それ以外 → localStorageにあるUUIDでログイン
        - 成功 → スコア送信（sendScore）
        - 失敗 → ユーザー登録（createUser）
- ユーザー登録
    * 入力した名前（displayName）をフィールドに持つ
    * userNameとpasswordは生成したUUID（共通）
    * ユーザー登録完了後、localStorageにUUIDを保存
    * ログイン処理へ戻す
- スコア送信
    * currentUserをフィールドに持つスコアデータを保存
    * 累計での順位を表示

## 私が追加したコード（すべてgame.jsに記載）
- 初期化
    * ncmb変数を宣言（@3）
    * ncmb変数をアプリキーで初期化（init, @484）
    * OnsenUIを使うための宣言（init, @533）

- スコア保存
    * スコアを保存する処理（sendScore, @362）
        - クラス生成
        - インスタンス生成
        - 保存処理
        - 保存終了後、countクエリを使って順位を求める
        - 順位をアラートで表示する

- ユーザー登録
    * 適当なuuidを生成する処理（uuid, @403）
    * ログイン処理（connectToNCMB, @299）
        - 状態に応じて、ユーザー登録、スコア保存、ログイン処理を実行
    * ユーザー登録処理（createUser, @321）
        - 登録用ダイアログ表示
        - ユーザー生成、ACL設定
        - サインアップし、ログイン処理へ戻る
    * 処理の呼び出し（endGame/clearGame, @202）
        - もともとあったアラート表示はコメントアウト
        - ログイン処理を呼び出し

- ランキング表示
    * ランキングを表示する処理（showRanking, @416）
        - ユーザー情報（ポインタ）を含めた情報の取得
        - ランキング表に取得した情報を表示
    * ランキング画面を閉じる処理（closeRanking, @462）
